<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>resreq</title><meta name="description" content="Documentation for resreq"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">resreq</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>resreq</h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography"><p align="center">
  <img src="./logo.svg" width="300px"/>
</p>



<a href="#resreq" id="resreq" style="color: inherit; text-decoration: none;">
  <h1>Resreq</h1>
</a>
<p><a href="https://www.npmjs.com/package/resreq"><img src="https://img.shields.io/github/v/release/molvqingtai/resreq" alt="version"></a> <a href="https://deno.land/x/resreq"><img src="http://img.shields.io/badge/available%20on-deno.land/x-lightgrey.svg?logo=deno&labelColor=black&color=blue" alt="deno land"></a> <a href="https://github.com/molvqingtai/resreq/actions"><img src="https://github.com/molvqingtai/resreq/actions/workflows/ci.yml/badge.svg" alt="workflow"></a> <a href="https://www.npmjs.com/package/resreq"><img src="https://img.shields.io/npm/dt/resreq" alt="download"></a> <a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="JavaScript Style Guide"></a></p>

<a href="#what-is-resreq" id="what-is-resreq" style="color: inherit; text-decoration: none;">
  <h2>What is resreq?</h2>
</a>
<p>It is a modern http client, based on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch">fetch</a>, because it is implemented internally using the onion model, so you can use middleware to intercept requests and responses elegantly.</p>
<p><a href="https://dev.to/molvqingtai/applying-koas-onion-model-to-front-end-requests-356p">Learn more</a></p>

<a href="#install" id="install" style="color: inherit; text-decoration: none;">
  <h2>Install</h2>
</a>
<p>Resreq targets modern browsers and <a href="https://github.com/denoland/deno">Deno</a></p>
<pre><code class="language-shell"><span class="hl-0">pnpm install resreq</span>
</code></pre>
<p><strong>or</strong></p>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">Resreq</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;https://deno.land/x/resreq/src/index.ts&#39;</span>
</code></pre>
<p>If you use it in <a href="https://nodejs.org/en/">Node</a>, you need to add some polyfill</p>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">fetch</span><span class="hl-0">, { </span><span class="hl-2">Headers</span><span class="hl-0">, </span><span class="hl-2">Request</span><span class="hl-0">, </span><span class="hl-2">Response</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;node-fetch&#39;</span><br/><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">AbortController</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;abort-controller&#39;</span><br/><br/><span class="hl-2">globalThis</span><span class="hl-0">.</span><span class="hl-2">fetch</span><span class="hl-0"> = </span><span class="hl-2">fetch</span><br/><span class="hl-2">globalThis</span><span class="hl-0">.</span><span class="hl-2">Headers</span><span class="hl-0"> = </span><span class="hl-2">Headers</span><br/><span class="hl-2">globalThis</span><span class="hl-0">.</span><span class="hl-2">Request</span><span class="hl-0"> = </span><span class="hl-2">Request</span><br/><span class="hl-2">globalThis</span><span class="hl-0">.</span><span class="hl-2">Response</span><span class="hl-0"> = </span><span class="hl-2">Response</span><br/><span class="hl-2">globalThis</span><span class="hl-0">.</span><span class="hl-2">AbortController</span><span class="hl-0"> = </span><span class="hl-2">AbortController</span>
</code></pre>

<a href="#documentation" id="documentation" style="color: inherit; text-decoration: none;">
  <h2>Documentation</h2>
</a>

<a href="#get-started" id="get-started" style="color: inherit; text-decoration: none;">
  <h3>Get Started</h3>
</a>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-0"> </span><span class="hl-2">Resreq</span><span class="hl-0"> </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;resreq&#39;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com&#39;</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">request</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">url:</span><span class="hl-0"> </span><span class="hl-3">&#39;/api&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">method:</span><span class="hl-0"> </span><span class="hl-3">&#39;GET&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">params:</span><span class="hl-0"> { </span><span class="hl-2">foo:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span>
</code></pre>
<p><strong>Use Methods</strong></p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">()</span><br/><br/><span class="hl-7">// Get request</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">(</span><span class="hl-3">&#39;https://example.com/api&#39;</span><span class="hl-0">, {</span><br/><span class="hl-0">  </span><span class="hl-2">params:</span><span class="hl-0"> { </span><span class="hl-2">foo:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span><br/><br/><span class="hl-7">// Post request</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">post</span><span class="hl-0">(</span><span class="hl-3">&#39;https://example.com/api&#39;</span><span class="hl-0">, {</span><br/><span class="hl-0">  </span><span class="hl-2">body:</span><span class="hl-0"> { </span><span class="hl-2">foo:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span><br/><br/><span class="hl-7">// Cancel request</span><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">abortController</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">AbortController</span><span class="hl-0">()</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">url:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com/api&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">signal:</span><span class="hl-0"> </span><span class="hl-2">abortController</span><span class="hl-0">.</span><span class="hl-2">signal</span><br/><span class="hl-0">}).</span><span class="hl-6">catch</span><span class="hl-0">(</span><span class="hl-2">error</span><span class="hl-0">){</span><br/><span class="hl-0">  console.log(error) </span><span class="hl-7">// Abort error</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-2">abortController</span><span class="hl-0">.</span><span class="hl-6">abort</span><span class="hl-0">() </span><span class="hl-7">// request abort</span><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span>
</code></pre>
<p><strong>Use Middlewares</strong></p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com&#39;</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-7">// Intercepting responses and requests using middleware</span><br/><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">use</span><span class="hl-0">((</span><span class="hl-2">next</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-4">async</span><span class="hl-0"> (</span><span class="hl-2">req</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">req</span><span class="hl-0">) </span><span class="hl-7">// Request can be changed here</span><br/><span class="hl-0">    </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">next</span><span class="hl-0">(</span><span class="hl-2">req</span><span class="hl-0">)</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">) </span><span class="hl-7">// Response can be changed here</span><br/><span class="hl-0">    </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-2">res</span><br/><span class="hl-0">  } </span><span class="hl-1">catch</span><span class="hl-0"> (</span><span class="hl-2">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">error</span><span class="hl-0">) </span><span class="hl-7">// Catch errors here</span><br/><span class="hl-0">    </span><span class="hl-1">throw</span><span class="hl-0"> </span><span class="hl-2">error</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">(</span><span class="hl-3">&#39;/api&#39;</span><span class="hl-0">, {</span><br/><span class="hl-0">  </span><span class="hl-2">params:</span><span class="hl-0"> { </span><span class="hl-2">foo:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><span class="hl-0"> }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span>
</code></pre>

<a href="#api" id="api" style="color: inherit; text-decoration: none;">
  <h3>API</h3>
</a>
<p><strong>new Resreq(options?:Options)</strong></p>
<p>Create a resreq instance and configure the global options</p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">timeout:</span><span class="hl-0"> </span><span class="hl-8">10000</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">throwHttpError:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">onResponseProgress</span><span class="hl-2">:</span><span class="hl-0">(</span><span class="hl-2">progress</span><span class="hl-0">: </span><span class="hl-9">Progress</span><span class="hl-0">, </span><span class="hl-2">chunk</span><span class="hl-0">: </span><span class="hl-9">Uint8Array</span><span class="hl-0">){</span><br/><span class="hl-0">    console.log(</span><span class="hl-2">progress</span><span class="hl-0">,chunk)</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span>
</code></pre>
<p><strong>resreq.request(options?:Options)</strong></p>
<p>Use &#39;&#39;request&#39;&#39; to send the request and configure the options</p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com&#39;</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">request</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">url:</span><span class="hl-0"> </span><span class="hl-3">&#39;/api&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">method:</span><span class="hl-0"> </span><span class="hl-3">&#39;GET&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-2">params:</span><span class="hl-0"> { </span><span class="hl-2">foo:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><span class="hl-0"> },</span><br/><span class="hl-0">  </span><span class="hl-2">throwHttpError:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">onResponseProgress</span><span class="hl-2">:</span><span class="hl-0">(</span><span class="hl-2">progress</span><span class="hl-0">: </span><span class="hl-9">Progress</span><span class="hl-0">, </span><span class="hl-2">chunk</span><span class="hl-0">: </span><span class="hl-9">Uint8Array</span><span class="hl-0">){</span><br/><span class="hl-0">    console.log(</span><span class="hl-2">progress</span><span class="hl-0">,chunk)</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span>
</code></pre>
<p><strong>resreq[method](options?:Options)</strong></p>
<p>Use &#39;&#39;method&#39;&#39; to send the request and configure the options</p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com&#39;</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">(</span><span class="hl-3">&#39;/api&#39;</span><span class="hl-0">,{</span><br/><span class="hl-0">  </span><span class="hl-2">params:</span><span class="hl-0"> { </span><span class="hl-2">foo:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><span class="hl-0"> },</span><br/><span class="hl-0">  </span><span class="hl-2">throwHttpError:</span><span class="hl-0"> </span><span class="hl-4">true</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">onResponseProgress</span><span class="hl-2">:</span><span class="hl-0">(</span><span class="hl-2">progress</span><span class="hl-0">: </span><span class="hl-9">Progress</span><span class="hl-0">, </span><span class="hl-2">chunk</span><span class="hl-0">: </span><span class="hl-9">Uint8Array</span><span class="hl-0">){</span><br/><span class="hl-0">       console.log(</span><span class="hl-2">progress</span><span class="hl-0">,chunk)</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-6">json</span><span class="hl-0">())</span>
</code></pre>
<p><strong>resreq.use(middleware:Middleware)</strong></p>
<p>Rewriting request headers using middleware</p>
<pre><code class="language-typescript"><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">resreq</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Resreq</span><span class="hl-0">({</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl:</span><span class="hl-0"> </span><span class="hl-3">&#39;https://example.com&#39;</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">use</span><span class="hl-0">((</span><span class="hl-2">next</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-4">async</span><span class="hl-0"> (</span><span class="hl-2">req</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">// Create a new request with Req</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">_req</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Req</span><span class="hl-0">(</span><span class="hl-2">req</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-2">headers:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-3">&#39;X-Custom-Header&#39;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-3">&#39;bar&#39;</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">next</span><span class="hl-0">(</span><span class="hl-2">_req</span><span class="hl-0">)</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-2">resreq</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">(</span><span class="hl-3">&#39;/api&#39;</span><span class="hl-0">, {</span><br/><span class="hl-0">  </span><span class="hl-2">headers:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-3">&#39;X-Custom-Header&#39;</span><span class="hl-2">:</span><span class="hl-0"> </span><span class="hl-3">&#39;foo&#39;</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">})</span><br/><br/><span class="hl-2">console</span><span class="hl-0">.</span><span class="hl-6">log</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">.</span><span class="hl-2">headers</span><span class="hl-0">.</span><span class="hl-6">get</span><span class="hl-0">(</span><span class="hl-3">&#39;X-Custom-Header&#39;</span><span class="hl-0">)) </span><span class="hl-7">// bar</span>
</code></pre>
<p><strong>Req(req:Req, init?:ReqInit)</strong></p>
<p><strong>Res(res:Res, init?:ResInit)</strong></p>
<p>In the middleware, use <code>new Req()</code> and <code>new Res()</code> to rewrite the request and response</p>
<pre><code class="language-typescript"><span class="hl-1">import</span><span class="hl-0"> { </span><span class="hl-2">Middleware</span><span class="hl-0">, </span><span class="hl-2">Req</span><span class="hl-0">, </span><span class="hl-2">Res</span><span class="hl-0"> } </span><span class="hl-1">from</span><span class="hl-0"> </span><span class="hl-3">&#39;./index&#39;</span><br/><br/><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-6">middleware</span><span class="hl-0">: </span><span class="hl-9">Middleware</span><span class="hl-0"> = (</span><span class="hl-2">next</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-4">async</span><span class="hl-0"> (</span><span class="hl-2">req</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">_req</span><span class="hl-0"> = </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Req</span><span class="hl-0">(</span><span class="hl-2">req</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-2">url:</span><span class="hl-0"> </span><span class="hl-3">&#39;http://localhost:3000/mock/api&#39;</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">  </span><span class="hl-4">const</span><span class="hl-0"> </span><span class="hl-5">res</span><span class="hl-0"> = </span><span class="hl-1">await</span><span class="hl-0"> </span><span class="hl-6">next</span><span class="hl-0">(</span><span class="hl-2">_req</span><span class="hl-0">)</span><br/><span class="hl-0">  </span><span class="hl-1">return</span><span class="hl-0"> </span><span class="hl-4">new</span><span class="hl-0"> </span><span class="hl-6">Res</span><span class="hl-0">(</span><span class="hl-2">res</span><span class="hl-0">, {</span><br/><span class="hl-0">    </span><span class="hl-2">status:</span><span class="hl-0"> </span><span class="hl-8">200</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-2">statusText:</span><span class="hl-0"> </span><span class="hl-3">&#39;mock success&#39;</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Note: Req &amp; Res extends from <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">Request</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response">Response</a>; to create a new request and response in the middleware, use Req &amp; Res</p>

<a href="#interfaces" id="interfaces" style="color: inherit; text-decoration: none;">
  <h3>Interfaces</h3>
</a>
<p><strong>Options</strong></p>
<p>Options extends from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">RequestInit</a> type with some additional properties</p>
<pre><code class="language-typescript"><span class="hl-4">interface</span><span class="hl-0"> </span><span class="hl-9">Options</span><span class="hl-0"> </span><span class="hl-4">extends</span><span class="hl-0"> </span><span class="hl-9">Omit</span><span class="hl-0">&lt;</span><span class="hl-9">RequestInit</span><span class="hl-0">, </span><span class="hl-3">&#39;body&#39;</span><span class="hl-0">&gt; {</span><br/><span class="hl-0">  </span><span class="hl-2">baseUrl</span><span class="hl-0">?: </span><span class="hl-9">string</span><br/><span class="hl-0">  </span><span class="hl-2">url</span><span class="hl-0">?: </span><span class="hl-9">string</span><br/><span class="hl-0">  </span><span class="hl-2">method</span><span class="hl-0">?: </span><span class="hl-3">&#39;GET&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;POST&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;PUT&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;DELETE&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;HEAD&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;PATCH&#39;</span><br/><span class="hl-0">  </span><span class="hl-2">params</span><span class="hl-0">?: </span><span class="hl-9">Record</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-9">any</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">body</span><span class="hl-0">?: </span><span class="hl-9">BodyInit</span><span class="hl-0"> | </span><span class="hl-9">Record</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-9">any</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">meta</span><span class="hl-0">?: </span><span class="hl-9">Record</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-9">any</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">timeout</span><span class="hl-0">?: </span><span class="hl-9">number</span><br/><span class="hl-0">  </span><span class="hl-2">throwHttpError</span><span class="hl-0">?: </span><span class="hl-9">boolean</span><br/><span class="hl-0">  </span><span class="hl-2">onResponseProgress</span><span class="hl-0">?: </span><span class="hl-9">ProgressCallback</span><br/><span class="hl-0">}</span>
</code></pre>
<ul>
<li><strong>baseUrl</strong>: The url prefix of the request will be concatenated with the url in <code>resreq[method]()</code> to form a complete request address, the default value is &#39; &#39;</li>
<li><strong>url</strong>: Request url, the default value is &#39; &#39;</li>
<li><strong>method</strong>：Request method, the default value is &#39;GET&#39;</li>
<li><strong>params</strong>: The params of a <code>resreq.get</code> request are automatically added to the url via the <a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams">new URLSearchParams</a> method</li>
<li><strong>body</strong>: Based on <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">BodyInit</a>, and adding <code>Record&lt;string, any&gt;</code>, which means you can pass <code>object</code> directly, instead of <code>JSON.stringify(object)</code>, which will automatically add <code>Content-Type: application/json</code> request headers</li>
<li><strong>meta</strong>: The extra information that needs to be carried in the request is not really sent to the server, but it can be obtained in the <code>res.meta</code></li>
<li><strong>timeout</strong>: Specify the number of milliseconds of time before the request, if the time is exceeded the request will be aborted, the default value is 1000ms</li>
<li><strong>throwHttpError</strong>: If true, a status code outside of 200-299 will throw an error, the default value is false</li>
<li><strong>onResponseProgress</strong>: The download progress hook, which depends on the <a href="https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream">ReadableStream API</a>, does not currently work in node</li>
</ul>
<p>To avoid adding complexity, <code>new Resreq(options)</code> and <code>resreq[method](options)</code>, in which &#39;options&#39; are of the same type</p>
<p>The options defined in <code>new Resreq(options)</code> will take effect globally, <code>resreq[method](options)</code>, will override the &quot;global options&quot;, except for the following options which will not be overridden</p>
<ul>
<li><p><strong>headers</strong>: The headers defined in the method are merged into the global headers</p>
</li>
<li><p><strong>onResponseProgress</strong>: Defining onResponseProgress in a method and the global onResponseProgress are both retained.</p>
</li>
</ul>
<p><strong>ReqInit</strong></p>
<p>Options extends from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/Request">RequestInit</a> type with some additional properties</p>
<pre><code class="language-typescript"><span class="hl-4">interface</span><span class="hl-0"> </span><span class="hl-9">ReqInit</span><span class="hl-0"> </span><span class="hl-4">extends</span><span class="hl-0"> </span><span class="hl-9">Omit</span><span class="hl-0">&lt;</span><span class="hl-9">RequestInit</span><span class="hl-0">, </span><span class="hl-3">&#39;body&#39;</span><span class="hl-0">&gt; {</span><br/><span class="hl-0">  </span><span class="hl-2">url</span><span class="hl-0">?: </span><span class="hl-9">string</span><br/><span class="hl-0">  </span><span class="hl-2">method</span><span class="hl-0">?: </span><span class="hl-3">&#39;GET&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;POST&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;PUT&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;DELETE&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;HEAD&#39;</span><span class="hl-0"> | </span><span class="hl-3">&#39;PATCH&#39;</span><br/><span class="hl-0">  </span><span class="hl-2">meta</span><span class="hl-0">?: </span><span class="hl-9">Record</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-9">any</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">timeout</span><span class="hl-0">?: </span><span class="hl-9">number</span><br/><span class="hl-0">  </span><span class="hl-2">throwHttpError</span><span class="hl-0">?: </span><span class="hl-9">boolean</span><br/><span class="hl-0">  </span><span class="hl-2">body</span><span class="hl-0">?: </span><span class="hl-9">BodyInit</span><span class="hl-0"> | </span><span class="hl-9">Record</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-9">any</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">onResponseProgress</span><span class="hl-0">?: </span><span class="hl-9">ProgressCallback</span><br/><span class="hl-0">}</span>
</code></pre>
<p>Note: that its &#39;headers&#39; behave differently than &#39;Options.headers&#39;, which overrides the global headers</p>
<p><strong>ResInit</strong></p>
<p>ResInit extends from the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Response/Response">ResponseInit</a> type with some additional properties</p>
<pre><code class="language-typescript"><span class="hl-4">interface</span><span class="hl-0"> </span><span class="hl-9">ResInit</span><span class="hl-0"> </span><span class="hl-4">extends</span><span class="hl-0"> </span><span class="hl-9">ResponseInit</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-2">meta</span><span class="hl-0">?: </span><span class="hl-9">Record</span><span class="hl-0">&lt;</span><span class="hl-9">string</span><span class="hl-0">, </span><span class="hl-9">any</span><span class="hl-0">&gt;</span><br/><span class="hl-0">  </span><span class="hl-2">timeout</span><span class="hl-0">?: </span><span class="hl-9">number</span><br/><span class="hl-0">  </span><span class="hl-2">throwHttpError</span><span class="hl-0">?: </span><span class="hl-9">boolean</span><br/><span class="hl-0">  </span><span class="hl-2">onResponseProgress</span><span class="hl-0">?: </span><span class="hl-9">ProgressCallback</span><br/><span class="hl-0">}</span>
</code></pre>
<p><strong>Middleware</strong></p>
<p>The middleware must call next(req) to return a promise</p>
<pre><code class="language-typescript"><span class="hl-4">type</span><span class="hl-0"> </span><span class="hl-9">Middleware</span><span class="hl-0"> = (</span><span class="hl-2">next</span><span class="hl-0">: </span><span class="hl-9">Next</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> (</span><span class="hl-2">req</span><span class="hl-0">: </span><span class="hl-9">Req</span><span class="hl-0">) </span><span class="hl-4">=&gt;</span><span class="hl-0"> </span><span class="hl-9">Promise</span><span class="hl-0">&lt;</span><span class="hl-9">Res</span><span class="hl-0">&gt;</span>
</code></pre>

<a href="#standing-on-the-shoulders-of-giants" id="standing-on-the-shoulders-of-giants" style="color: inherit; text-decoration: none;">
  <h3>Standing on the shoulders of giants</h3>
</a>
<p>Some of the inspiration for this project came from their.</p>
<ul>
<li><a href="https://github.com/axios/axios">Axios</a>: Promise based HTTP client for the browser and node.js</li>
<li><a href="https://github.com/sindresorhus/ky">Ky</a>: Tiny &amp; elegant JavaScript HTTP client based on the browser Fetch API</li>
<li><a href="https://github.com/reduxjs/redux">Redux</a>: Predictable state container for JavaScript apps</li>
<li><a href="https://github.com/koajs/koa">Koa</a>: Next generation web framework for node.js</li>
</ul>

<a href="#license" id="license" style="color: inherit; text-decoration: none;">
  <h3>License</h3>
</a>
<p>This project is licensed under the MIT License - see the <a href="./LICENSE">LICENSE</a> file for details</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/Req.html" class="tsd-kind-icon">Req</a></li><li class="tsd-kind-class"><a href="classes/Res.html" class="tsd-kind-icon">Res</a></li><li class="tsd-kind-class"><a href="classes/default.html" class="tsd-kind-icon">default</a></li><li class="tsd-kind-interface"><a href="interfaces/Options.html" class="tsd-kind-icon">Options</a></li><li class="tsd-kind-interface"><a href="interfaces/ReqInit.html" class="tsd-kind-icon">Req<wbr/>Init</a></li><li class="tsd-kind-interface"><a href="interfaces/ResInit.html" class="tsd-kind-icon">Res<wbr/>Init</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Middleware" class="tsd-kind-icon">Middleware</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Next" class="tsd-kind-icon">Next</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>